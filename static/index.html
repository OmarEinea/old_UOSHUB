<!doctype html>
<html>
    <head>
        <!--Import Angular-Material styles-->
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.css">
        <!--Import Roboto font styles-->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
        <!--Import FontAwesome.js-->
        <script src="https://use.fontawesome.com/2f77a7a804.js"></script>
        <!--Import common styles-->
        {% assets "common.css" -%}
            <link rel="stylesheet" href="{{ ASSET_URL }}">
        {% endassets -%}
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!--Setup page icon-->
        <link rel="shortcut icon" href="{{ url_for('static', filename='img/icon.png') }}"/>
        <!--Setup page title-->
        <title>UOSHUB</title>
        {% if not config.DEBUG -%}
        <!--Google Analytics start-->
        <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga("create","UA-XXXXX-Y","auto");ga("send","pageview");</script>
        <script async src="https://www.google-analytics.com/analytics.js"></script>
        <!--Google Analytics end-->
        {% endif %}
    </head>

    <body ng-app="main" ng-cloak>
        <md-toolbar class="md-primary">
            <div class="md-toolbar-tools" ng-controller="accountButton">
                <a href="http://uoshub.tk">
                    <md-icon md-svg-icon="{{ url_for('static' , filename='img/logo.svg') }}"></md-icon>
                    <span class="md-headline lighter white"><b>UOS</b> HUB</span>
                </a>
                <span flex></span>
                <md-button id="loginButton" class="md-raised md-accent no-margin" ng-click="showPanel()">Login</md-button>
            </div>
        </md-toolbar>
        <script type="text/ng-template" id="account-panel.html">
            <div ng-controller="accountHandler" ng-switch="student.status">
                <div ng-switch-when="loggedIn" layout="column" layout-align="space-between stretch" layout-padding>
                    <div layout="row">
                        <img flex="33" src="{{ url_for('static' , filename='img/avatar.png') }}" height="122"/>
                        <div flex layout="column" layout-align="center">
                            <p class="md-headline" style="font-size: 28px">{$ student.name $}</p>
                            <p class="md-subhead">{$ student.sid $}@sharjah.ac.ae</p>
                        </div>
                    </div>
                    <div layout="row">
                        <div flex="33" layout="column" class="grey">
                            <p class="md-subhead"><md-icon md-font-icon="fa fa-graduation-cap fa-fw"></md-icon> Major</p>
                            <p class="md-subhead"><md-icon md-font-icon="fa fa-clock-o fa-fw"></md-icon> Earned</p>
                        </div>
                        <div flex layout="column">
                            <p class="md-subhead">{$ student.major $}</p>
                            <p class="md-subhead">{$ student.ech $} <span class="grey">(Credit Hours)</span></p>
                        </div>
                    </div>
                    <md-divider></md-divider>
                    <div layout="row">
                        <div layout="row" flex layout-align="center" class="grey">
                            <md-checkbox ng-model="!student.remember" class="grey no-margin" flex>Clear data on logout?</md-checkbox>
                            <md-button class="md-primary md-raised no-margin" ng-click="logout()">Logout</md-button>
                        </div>
                    </div>
                </div>
                <div ng-switch-when="waiting" layout="column" layout-align="space-around center">
                    <h2 class="md-headline lighter white">Securely logging into UOSHUB</h2>
                    <md-progress-circular class="md-accent"></md-progress-circular>
                    <h4 class="md-subhead lighter white">Few more seconds...</h4>
                </div>
                <div ng-switch-when="switching"></div>
                <div ng-switch-when="loggedOut" layout="column">
                    <md-toolbar layout="row" class="md-accent">
                        <div class="md-toolbar-tools">
                            <span class="md-headline">Welcome to Your UOSHUB!</span>
                        </div>
                    </md-toolbar>
                    <form layout="column" flex layout-align="space-between stretch" layout-margin name="form" novalidate>
                        <span flex></span>
                        <md-input-container layout="row" class="md-block grey">
                            <label class="md-title lighter">Student ID</label>
                            <input required md-maxlength="9" name="sid" type="text" ng-model="student.sid"/>
                            <div class="hint" ng-if="!form.sid.$touched || form.sid.$valid">e.g. u14111000</div>
                            <div ng-messages="form.sid.$error">
                                <div ng-message="required">Your ID is required.</div>
                                <div ng-message="md-maxlength">Your ID is too long.</div>
                            </div>
                        </md-input-container>
                        <p></p>
                        <md-input-container layout="row" class="md-block grey">
                            <label class="md-title lighter">Password</label>
                            <input required md-maxlength="20" name="pin" type="password" ng-model="student.pin">
                            <div class="hint" ng-if="!form.pin.$touched || form.pin.$valid">Same as myUDC</div>
                            <div ng-messages="form.pin.$error">
                                <div ng-message="required">Password is required.</div>
                                <div ng-message="md-maxlength">Password is too long.</div>
                            </div>
                        </md-input-container>
                        <div layout="row" layout-align="center">
                            <md-checkbox ng-model="student.remember" class="grey no-margin" flex>Remember me?</md-checkbox>
                            <md-button class="md-primary md-raised no-margin" type="submit" ng-click="login(form, student.sid)">Let's Go</md-button>
                        </div>
                    </form>
                </div>
            </div>
        </script>

        <!--Import Angular.js-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-aria.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-messages.min.js"></script>
        <!--Import Angular-Material.js-->
        <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.0/angular-material.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <!--Import common scripts and Angular-Local-Storage.js-->
        {% assets "common.js" -%}
            <script src="{{ ASSET_URL }}"></script>
        {% endassets -%}
    </body>
</html>
